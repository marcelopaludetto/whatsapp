<!doctype html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Enviar Mensagem no WhatsApp</title>
    <style>
        body { font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; display: grid; place-content: center; min-height: 100vh; margin: 0; padding: 20px; background-color: #f0f2f5; }
        form { display: flex; flex-direction: column; gap: 12px; width: 100%; max-width: 400px; background-color: #fff; padding: 24px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h2 { margin: 0 0 16px; text-align: center; }
        input { padding: 10px; font-size: 1rem; border-radius: 6px; border: 1px solid #ccc; width: 100%; box-sizing: border-box; }
        button { padding: 12px 18px; font-size: 1rem; cursor: pointer; background-color: #25D366; color: white; border: none; border-radius: 6px; font-weight: bold; }
        button:hover { background-color: #128C7E; }

        .item-orcamento { border: 1px solid #e0e0e0; padding: 12px; border-radius: 6px; display: flex; flex-direction: column; gap: 8px; }
        .item-detalhes { display: flex; gap: 8px; align-items: center; }
        .item-detalhes input { text-align: center; }
        .item-detalhes span { font-size: 1.2rem; }
        .total-container { text-align: right; font-size: 1.2rem; font-weight: bold; margin-top: 8px; }
        label { font-weight: 500; color: #333; }
    </style>
</head>
<body>

    <form id="meuFormulario">
        <h2>Gerador de Orçamento</h2>

        <div class="item-orcamento">
            <label>Item 1</label>
            <input type="text" class="descricao" placeholder="Descrição do produto/serviço">
            <div class="item-detalhes">
                <input type="number" class="quantidade" placeholder="Qtd" min="0" value="1" step="any">
                <span>x R$</span>
                <input type="number" class="preco" placeholder="Preço unitário" min="0" step="0.01">
            </div>
        </div>

        <div class="item-orcamento">
            <label>Item 2</label>
            <input type="text" class="descricao" placeholder="Descrição do produto/serviço">
            <div class="item-detalhes">
                <input type="number" class="quantidade" placeholder="Qtd" min="0" value="1" step="any">
                <span>x R$</span>
                <input type="number" class="preco" placeholder="Preço unitário" min="0" step="0.01">
            </div>
        </div>

        <div class="total-container">
            Total: R$ <span id="totalOrcamento">0.00</span>
        </div>

        <button type="submit">Enviar Orçamento via WhatsApp</button>
    </form>

    <script>
        const numeroWhatsApp = "5541999002723"; // <-- SEU NÚMERO AQUI
        const form = document.getElementById('meuFormulario');
        const totalOrcamentoEl = document.getElementById('totalOrcamento');
        const itensOrcamento = form.querySelectorAll('.item-orcamento');

        function calcularTotal() {
            let total = 0;
            itensOrcamento.forEach(item => {
                const quantidade = parseFloat(item.querySelector('.quantidade').value) || 0;
                const preco = parseFloat(item.querySelector('.preco').value) || 0;
                total += quantidade * preco;
            });
            totalOrcamentoEl.textContent = total.toFixed(2).replace('.', ',');
        }

        form.addEventListener('input', calcularTotal);

        form.addEventListener('submit', function(evento) {
            // Impede que a página recarregue ao enviar o formulário
            evento.preventDefault();

            let mensagem = "*Orçamento:*\n\n";
            let totalFinal = 0;

            itensOrcamento.forEach((item, index) => {
                const descricao = item.querySelector('.descricao').value;
                const quantidade = parseFloat(item.querySelector('.quantidade').value) || 0;
                const preco = parseFloat(item.querySelector('.preco').value) || 0;

                if (descricao && quantidade > 0 && preco > 0) {
                    const subtotal = quantidade * preco;
                    totalFinal += subtotal;
                    mensagem += `*Item ${index + 1}:* ${descricao}\n`;
                    mensagem += `*Qtd:* ${quantidade} x *R$ ${preco.toFixed(2).replace('.', ',')}*\n`;
                    mensagem += `*Subtotal:* R$ ${subtotal.toFixed(2).replace('.', ',')}\n\n`;
                }
            });

            mensagem += `*TOTAL GERAL: R$ ${totalFinal.toFixed(2).replace('.', ',')}*`;

            // Codifica a mensagem para a URL
            const mensagemCodificada = encodeURIComponent(mensagem);

            // Monta a URL final do WhatsApp
            const url = `https://wa.me/${numeroWhatsApp}?text=${mensagemCodificada}`;

            // Abre a URL em uma nova aba
            window.open(url, '_blank');
        });

        // Calcula o total inicial caso haja valores pré-definidos
        calcularTotal();
    </script>

</body>
</html>
